{% macro post_template(post, information_icon, post_url, current_url) %}
    {% if post %}
        <h2>{{ post.title }}</h2>
        <p>{{ post.content }}</p>
        <p>{{ post.createdAt |date('d/m/Y') }}</p>

        {% if post.private %}
            <p><span class="label label-warning">Private</span></p>
        {% endif %}

        <p>{{ post.insertUser.completeName }}</p>

        {% if post.tags %}
            {% for tag in post.tags %}
                {{ tag }}
                {% if not loop.last	 %}
                    ,
                {% endif %}
            {% endfor %}
        {% endif %}

        {% set countElements = post.hasParent  + post.children.count %}

        {% if countElements %}
            {% if countElements > 1%}
                <p>{{ information_icon }} + {{ countElements }}</p>
            {% else %}
                <p>{{ information_icon }} </p>
            {% endif %}
        {% endif %}

        {% if post.parent %}
            <h3>Parent</h3>
            <a href="{{ post_url }}&post_id={{ post.parent.id }}">
                {{ post.parent.title }}
            </a>
        {% endif %}

        {% if post.children.count %}
            <h3>Children</h3>
            {% for child in post.children %}
                <p>
                <a href="{{ post_url }}&post_id={{ child.id }}">
                {{ child.title }}
                </a>
                </p>
            {% endfor %}
        {% endif %}
    {% endif %}
{% endmacro %}

{% import _self as template %}

<div class="actions">
    {{ back_link }}
</div>
<h1>Care detail view</h1>
{{ template.post_template(post, information_icon, post_url, current_url) }}